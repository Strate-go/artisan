<!-- 
=======================================================
CARTE INTERACTIVE STRATÉGO - VERSION MAP UNIQUE
=======================================================
INSTRUCTIONS :
1. Copiez TOUT ce code
2. Dans Squarespace : Ajoutez un "Bloc de code"
3. Collez ce code dans le bloc
4. Remplacez les SVG par les vôtres (voir instructions)
5. Sauvegardez et publiez !
=======================================================
-->

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&family=Raleway:wght@400;700&display=swap" rel="stylesheet">

<!-- Container principal -->
<div id="stratego-single-map" style="width: 100%; max-width: none; margin: 0; padding: 0;">

<div class="stratego-container">
    <header class="stratego-header">
        <h1>Vous construisez pour vos clients. Mais qui vous aide à construire votre rentabilité ?</h1>
        <p class="subtitle">De l'atelier au chantier, vos défis sont les mêmes : transformer un savoir-faire exceptionnel en une activité sereine et rentable.</p>
    </header>

    <!-- Section avec texte à gauche et carte à droite -->
    <section class="main-section">
        <div class="section-content">
            <!-- Section 1 : Rentabilité -->
            <div class="content-block active" data-content="1">
                <h2>Votre <span class="highlight">rentabilité</span>, ce grand brouillard.</h2>
                <p class="section-description">
                    Vous terminez un chantier, la satisfaction du travail bien fait est là. Mais rapidement, la question qui fâche revient : "Combien ai-je vraiment gagné sur ce projet ?".
                </p>
                
                <div class="challenges">
                    <div class="challenge">
                        <h3>Fixer le juste prix</h3>
                        <p>Quel taux horaire pour valoriser votre savoir-faire ? Quel coefficient appliquer sur les fournitures ?</p>
                    </div>
                    <div class="challenge">
                        <h3>Facturer chaque minute</h3>
                        <p>Comment être sûr de ne pas oublier les temps de trajet, les allers-retours imprévus chez le fournisseur ?</p>
                    </div>
                    <div class="challenge">
                        <h3>Analyser le passé</h3>
                        <p>Savoir précisément sur quel chantier vous avez gagné de l'argent, et surtout, lequel vous en a fait perdre.</p>
                    </div>
                </div>
            </div>

            <!-- Section 2 : Trésorerie -->
            <div class="content-block" data-content="2">
                <h2>La <span class="highlight">trésorerie</span> en dents de scie : piloter à vue en permanence</h2>
                <p class="section-description">
                    Votre compte en banque ressemble aux montagnes russes. Cette absence de visibilité vous empêche de vous projeter et génère un stress constant.
                </p>
                
                <div class="challenges">
                    <div class="challenge">
                        <h3>Le décalage permanent</h3>
                        <p>Vous payez vos matériaux et vos charges aujourd'hui, mais vos clients, eux, vous paieront dans 30, 60, voire 90 jours.</p>
                    </div>
                    <div class="challenge">
                        <h3>Le coût du stock</h3>
                        <p>Vous financez des matières premières qui dorment à l'atelier ou dans la camionnette, sans savoir quand elles se transformeront en chiffre d'affaires.</p>
                    </div>
                    <div class="challenge">
                        <h3>L'absence de visibilité</h3>
                        <p>Impossible de savoir sereinement ce dont vous disposerez dans 3 mois pour payer l'URSSAF, la TVA ou simplement votre salaire.</p>
                    </div>
                </div>
            </div>

            <!-- Section 3 : Croissance -->
            <div class="content-block" data-content="3">
                <h2>Investir, recruter : seul face aux grandes <span class="highlight">décisions</span>.</h2>
                <p class="section-description">
                    Votre carnet de commandes se remplit, votre réputation grandit. Viennent alors les grandes décisions qui peuvent faire passer votre entreprise à l'étape supérieure.
                </p>
                
                <div class="challenges">
                    <div class="challenge">
                        <h3>Le pari matériel</h3>
                        <p>Est-ce le bon moment d'investir dans cette nouvelle machine ? De changer de véhicule ? Pouvez-vous vraiment vous le permettre ?</p>
                    </div>
                    <div class="challenge">
                        <h3>Le défi humain</h3>
                        <p>L'idée d'embaucher votre premier salarié ou un apprenti vous tente, mais les démarches et les responsabilités vous semblent être une véritable montagne.</p>
                    </div>
                    <div class="challenge">
                        <h3>La peur du risque</h3>
                        <p>Chaque grande décision ressemble à un pari sur l'avenir, et vous avez le sentiment de le faire seul, sans filet de sécurité pour valider vos intuitions.</p>
                    </div>
                </div>
            </div>

            <!-- Navigation entre sections -->
            <div class="section-nav">
                <button class="nav-btn active" data-target="1">Rentabilité</button>
                <button class="nav-btn" data-target="2">Trésorerie</button>
                <button class="nav-btn" data-target="3">Croissance</button>
            </div>
        </div>

        <!-- CARTE INTERACTIVE UNIQUE -->
        <div class="single-interactive-map">
            <!-- PROBLÈMES (Section 1 - Rentabilité) -->
            <div class="tile problem" data-tile="devis" data-section="1" style="grid-column: 1; grid-row: 1;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"/>
                        <polyline points="14,2 14,8 20,8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10,9 9,9 8,9"/>
                    </svg>
                </div>
                <div class="tile-title">Devis</div>
            </div>

            <div class="tile problem" data-tile="materiaux" data-section="1" style="grid-column: 2; grid-row: 2;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                        <polyline points="3.27,6.96 12,12.01 20.73,6.96"/>
                        <line x1="12" y1="22.08" x2="12" y2="12"/>
                    </svg>
                </div>
                <div class="tile-title">Matières Premières</div>
            </div>

            <div class="tile problem" data-tile="temps" data-section="1" style="grid-column: 3; grid-row: 1;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12,6 12,12 16,14"/>
                    </svg>
                </div>
                <div class="tile-title">Temps de Travail</div>
            </div>

            <!-- PROBLÈMES (Section 2 - Trésorerie) -->
            <div class="tile problem" data-tile="fournisseurs" data-section="2" style="grid-column: 1; grid-row: 3;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 4V2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v2h4a1 1 0 0 1 0 2h-1v14a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V6H3a1 1 0 0 1 0-2h4zM6 6v14a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V6H6zM9 3v1h6V3H9z"/>
                    </svg>
                </div>
                <div class="tile-title">Fournisseurs / Achats</div>
            </div>

            <div class="tile problem" data-tile="charges" data-section="2" style="grid-column: 2; grid-row: 4;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                        <path d="M12 14l2 2 4-4"/>
                    </svg>
                </div>
                <div class="tile-title">Charges / Salaires</div>
            </div>

            <div class="tile problem" data-tile="factures" data-section="2" style="grid-column: 3; grid-row: 3;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"/>
                        <polyline points="14,2 14,8 20,8"/>
                        <circle cx="12" cy="15" r="3"/>
                        <path d="M12 12v6"/>
                    </svg>
                </div>
                <div class="tile-title">Factures Clients</div>
            </div>

            <!-- PROBLÈMES (Section 3 - Croissance) -->
            <div class="tile problem" data-tile="doute" data-section="3" style="grid-column: 1; grid-row: 5;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 3a5 5 0 0 1 8 0v2a5 5 0 0 1-8 0V3z"/>
                        <path d="M12 19h.01"/>
                        <path d="M8.5 8.5c0 1 1.5 2.5 3.5 2.5s3.5-1.5 3.5-2.5"/>
                    </svg>
                </div>
                <div class="tile-title">Doute / Incertitude</div>
            </div>

            <div class="tile problem" data-tile="investissement" data-section="3" style="grid-column: 2; grid-row: 6;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                        <polyline points="14.5,2 14.5,7.5 20,7.5"/>
                        <path d="M12 18v-6l-2.5 1.5"/>
                        <path d="M12 18l2.5-1.5V12"/>
                    </svg>
                </div>
                <div class="tile-title">Investissement Matériel</div>
            </div>

            <div class="tile problem" data-tile="recrutement" data-section="3" style="grid-column: 3; grid-row: 5;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                        <line x1="19" y1="8" x2="19" y2="14"/>
                        <line x1="22" y1="11" x2="16" y2="11"/>
                    </svg>
                </div>
                <div class="tile-title">Recrutement</div>
            </div>

            <!-- SOLUTIONS (Centre) -->
            <div class="tile solution" data-tile="marge" data-section="1" style="grid-column: 5; grid-row: 2;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/>
                    </svg>
                </div>
                <div class="tile-title">Marge par Chantier</div>
            </div>

            <div class="tile solution" data-tile="previsionnel" data-section="2" style="grid-column: 5; grid-row: 4;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
                        <polyline points="17 6 23 6 23 12"/>
                    </svg>
                </div>
                <div class="tile-title">Prévisionnel de Trésorerie</div>
            </div>

            <div class="tile solution" data-tile="conseil" data-section="3" style="grid-column: 5; grid-row: 6;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10z"/>
                        <path d="M12 8l2 2-2 2-2-2 2-2z"/>
                    </svg>
                </div>
                <div class="tile-title">Conseil Stratégique</div>
            </div>

            <!-- BÉNÉFICES (Droite) -->
            <div class="tile benefit" data-tile="decisions" data-section="1" style="grid-column: 7; grid-row: 2;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                </div>
                <div class="tile-title">Décisions Éclairées</div>
            </div>

            <div class="tile benefit" data-tile="serenite" data-section="2" style="grid-column: 7; grid-row: 4;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                        <polyline points="22,4 12,14.01 9,11.01"/>
                    </svg>
                </div>
                <div class="tile-title">Sérénité / Anticipation</div>
            </div>

            <div class="tile benefit" data-tile="croissance" data-section="3" style="grid-column: 7; grid-row: 6;">
                <div class="tile-icon">
                    <!-- Remplacez par votre SVG -->
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                        <polyline points="9,12 12,15 22,6"/>
                    </svg>
                </div>
                <div class="tile-title">Croissance Sereine</div>
            </div>

            <!-- CONNEXIONS SVG avec coudes -->
            <svg class="connections" width="100%" height="100%">
                <!-- Section 1 : Rentabilité -->
                <path class="connection-line elbow" data-from="devis" data-to="marge" data-section="1"></path>
                <path class="connection-line elbow" data-from="materiaux" data-to="marge" data-section="1"></path>
                <path class="connection-line elbow" data-from="temps" data-to="marge" data-section="1"></path>
                <path class="connection-line elbow" data-from="marge" data-to="decisions" data-section="1"></path>

                <!-- Section 2 : Trésorerie -->
                <path class="connection-line elbow dashed" data-from="fournisseurs" data-to="previsionnel" data-section="2"></path>
                <path class="connection-line elbow dashed" data-from="charges" data-to="previsionnel" data-section="2"></path>
                <path class="connection-line elbow dashed" data-from="factures" data-to="previsionnel" data-section="2"></path>
                <path class="connection-line elbow" data-from="previsionnel" data-to="serenite" data-section="2"></path>

                <!-- Section 3 : Croissance -->
                <path class="connection-line elbow dashed" data-from="doute" data-to="investissement" data-section="3"></path>
                <path class="connection-line elbow dashed" data-from="doute" data-to="recrutement" data-section="3"></path>
                <path class="connection-line elbow intervention" data-from="conseil" data-to="doute" data-section="3"></path>
                <path class="connection-line elbow" data-from="conseil" data-to="croissance" data-section="3"></path>
            </svg>
        </div>
    </section>
</div>

<!-- CSS optimisé -->
<style>
#stratego-single-map {
    --dark-blue: #0B2957;
    --gold: #BF9B30;
    --light-blue: #3a8eff;
    --dark-gray: #4A4A4A;
    --light-gray: #f8f9fa;
    --inactive-gray: #e5e7eb;
    --white: #ffffff;
    --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    
    font-family: 'Raleway', sans-serif !important;
    line-height: 1.6;
    color: var(--dark-gray);
    position: relative;
    z-index: 1;
    background: transparent;
}

#stratego-single-map *,
#stratego-single-map *::before,
#stratego-single-map *::after {
    box-sizing: border-box;
}

#stratego-single-map .stratego-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
}

#stratego-single-map .stratego-header {
    text-align: center;
    padding: 80px 0 60px;
    max-width: 900px;
    margin: 0 auto;
}

#stratego-single-map .stratego-header h1 {
    font-family: 'Space Grotesk', sans-serif !important;
    font-weight: 700 !important;
    font-size: 3.5rem !important;
    color: var(--dark-blue) !important;
    margin: 0 0 24px 0 !important;
    line-height: 1.2 !important;
    text-align: center !important;
}

#stratego-single-map .subtitle {
    font-size: 1.25rem !important;
    color: var(--dark-gray) !important;
    max-width: 800px;
    margin: 0 auto !important;
    text-align: center;
}

#stratego-single-map .main-section {
    display: grid !important;
    grid-template-columns: 1fr 1fr;
    gap: 80px;
    align-items: start;
    margin-bottom: 120px;
}

#stratego-single-map .section-content {
    padding-right: 40px;
}

#stratego-single-map .content-block {
    display: none;
    animation: fadeIn 0.6s ease;
}

#stratego-single-map .content-block.active {
    display: block;
}

#stratego-single-map .content-block h2 {
    font-family: 'Space Grotesk', sans-serif !important;
    font-weight: 700 !important;
    font-size: 2.5rem !important;
    color: var(--dark-blue) !important;
    margin: 0 0 24px 0 !important;
    line-height: 1.3 !important;
}

#stratego-single-map .highlight {
    color: var(--gold) !important;
}

#stratego-single-map .section-description {
    font-size: 1.125rem !important;
    color: var(--dark-gray) !important;
    margin-bottom: 40px !important;
}

#stratego-single-map .challenges {
    display: flex !important;
    flex-direction: column;
    gap: 24px;
    margin-bottom: 40px;
}

#stratego-single-map .challenge {
    background: var(--white) !important;
    padding: 24px !important;
    border-radius: 12px !important;
    box-shadow: var(--shadow) !important;
}

#stratego-single-map .challenge h3 {
    font-family: 'Raleway', sans-serif !important;
    font-weight: 700 !important;
    color: var(--dark-blue) !important;
    margin: 0 0 8px 0 !important;
    font-size: 1.125rem !important;
}

#stratego-single-map .challenge p {
    color: var(--dark-gray) !important;
    font-size: 0.95rem !important;
    margin: 0 !important;
}

/* Navigation entre sections */
#stratego-single-map .section-nav {
    display: flex !important;
    gap: 12px;
    margin-top: 40px;
}

#stratego-single-map .nav-btn {
    background: var(--white) !important;
    border: 2px solid var(--inactive-gray) !important;
    border-radius: 8px !important;
    padding: 12px 24px !important;
    font-family: 'Raleway', sans-serif !important;
    font-weight: 600 !important;
    color: var(--dark-gray) !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    font-size: 0.9rem !important;
}

#stratego-single-map .nav-btn:hover {
    border-color: var(--gold) !important;
    color: var(--dark-blue) !important;
}

#stratego-single-map .nav-btn.active {
    background: var(--dark-blue) !important;
    border-color: var(--dark-blue) !important;
    color: var(--white) !important;
}

/* CARTE INTERACTIVE UNIQUE */
#stratego-single-map .single-interactive-map {
    position: relative;
    height: 600px;
    background: var(--white) !important;
    border-radius: 20px !important;
    box-shadow: var(--shadow-lg) !important;
    padding: 40px !important;
    display: grid !important;
    grid-template-columns: repeat(8, 1fr) !important;
    grid-template-rows: repeat(7, 1fr) !important;
    gap: 20px !important;
    overflow: hidden;
}

/* TUILES - État par défaut (grises) */
#stratego-single-map .tile {
    background: var(--inactive-gray) !important;
    border: 2px solid var(--inactive-gray) !important;
    border-radius: 16px !important;
    padding: 20px !important;
    display: flex !important;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
    cursor: pointer;
    position: relative;
    z-index: 2;
    min-height: 80px;
    opacity: 0.5;
}

#stratego-single-map .tile-icon {
    margin-bottom: 8px !important;
    opacity: 0.7;
    transition: all 0.4s ease;
    color: var(--dark-gray);
}

#stratego-single-map .tile-icon svg {
    width: 32px !important;
    height: 32px !important;
    transition: all 0.4s ease;
}

#stratego-single-map .tile-title {
    font-size: 0.875rem !important;
    font-weight: 600 !important;
    color: var(--dark-gray) !important;
    transition: all 0.4s ease;
    opacity: 0.7;
    margin: 0 !important;
}

/* TUILES ACTIVES */
#stratego-single-map .tile.active {
    opacity: 1 !important;
    background: var(--white) !important;
    box-shadow: var(--shadow-lg) !important;
    transform: translateY(-4px) !important;
}

#stratego-single-map .tile.active.problem {
    border-color: var(--gold) !important;
    background: linear-gradient(135deg, var(--white) 0%, #fefcf3 100%) !important;
}

#stratego-single-map .tile.active.solution {
    border-color: var(--light-blue) !important;
    background: linear-gradient(135deg, var(--light-blue) 0%, #60a5fa 100%) !important;
    color: var(--white) !important;
}

#stratego-single-map .tile.active.benefit {
    border-color: var(--light-blue) !important;
    background: linear-gradient(135deg, var(--light-blue) 0%, #2563eb 100%) !important;
    color: var(--white) !important;
}

#stratego-single-map .tile.active .tile-icon,
#stratego-single-map .tile.active .tile-title {
    opacity: 1 !important;
}

#stratego-single-map .tile.active.solution .tile-icon,
#stratego-single-map .tile.active.benefit .tile-icon {
    color: var(--white) !important;
}

#stratego-single-map .tile.active.solution .tile-title,
#stratego-single-map .tile.active.benefit .tile-title {
    color: var(--white) !important;
}

#stratego-single-map .tile:hover {
    transform: translateY(-2px) !important;
    box-shadow: var(--shadow) !important;
}

/* CONNEXIONS EN COUDES */
#stratego-single-map .connections {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
}

#stratego-single-map .connection-line {
    stroke: var(--gold);
    stroke-width: 3;
    fill: none;
    opacity: 0;
    transition: all 0.6s ease;
}

#stratego-single-map .connection-line.dashed {
    stroke-dasharray: 8 4;
}

#stratego-single-map .connection-line.active {
    opacity: 1;
    animation: drawElbow 1.5s ease forwards;
}

#stratego-single-map .connection-line.intervention {
    stroke: var(--light-blue);
    stroke-width: 4;
}

#stratego-single-map .connection-line.solution-line {
    stroke: var(--light-blue);
}

@keyframes drawElbow {
    from { stroke-dashoffset: 1000; }
    to { stroke-dashoffset: 0; }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

#stratego-single-map .tile.pulse {
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1) translateY(-4px); }
    50% { transform: scale(1.05) translateY(-4px); }
}

#stratego-single-map .tile.glow {
    box-shadow: 0 0 20px rgba(58, 143, 255, 0.6) !important;
}

/* Responsive */
@media (max-width: 1024px) {
    #stratego-single-map .main-section {
        grid-template-columns: 1fr !important;
        gap: 40px !important;
    }
    
    #stratego-single-map .section-content {
        padding-right: 0 !important;
    }
    
    #stratego-single-map .single-interactive-map {
        height: 500px !important;
        padding: 20px !important;
        grid-template-columns: repeat(6, 1fr) !important;
    }
    
    #stratego-single-map .stratego-header h1 {
        font-size: 2.5rem !important;
    }
    
    #stratego-single-map .content-block h2 {
        font-size: 2rem !important;
    }
}

@media (max-width: 768px) {
    #stratego-single-map .single-interactive-map {
        height: 400px !important;
        grid-template-columns: repeat(4, 1fr) !important;
        grid-template-rows: repeat(8, 1fr) !important;
    }
    
    #stratego-single-map .tile {
        padding: 15px !important;
        min-height: 60px !important;
    }
    
    #stratego-single-map .tile-icon svg {
        width: 24px !important;
        height: 24px !important;
    }
    
    #stratego-single-map .tile-title {
        font-size: 0.75rem !important;
    }
    
    #stratego-single-map .section-nav {
        flex-direction: column !important;
    }
    
    #stratego-single-map .nav-btn {
        text-align: center !important;
    }
}
</style>

<!-- JavaScript optimisé -->
<script>
(function() {
    'use strict';
    
    function initSingleMap() {
        if (!document.querySelector('#stratego-single-map')) {
            setTimeout(initSingleMap, 100);
            return;
        }
        
        class SingleMapController {
            constructor() {
                this.currentSection = 1;
                this.animationTimers = [];
                this.init();
            }
            
            init() {
                this.setupNavigation();
                this.setupSVGPaths();
                this.showSection(1);
                this.bindEvents();
            }
            
            setupNavigation() {
                const navBtns = document.querySelectorAll('#stratego-single-map .nav-btn');
                navBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        const targetSection = parseInt(btn.dataset.target);
                        this.showSection(targetSection);
                    });
                });
            }
            
            showSection(sectionNumber) {
                this.currentSection = sectionNumber;
                
                // Mettre à jour navigation
                document.querySelectorAll('#stratego-single-map .nav-btn').forEach(btn => {
                    btn.classList.toggle('active', parseInt(btn.dataset.target) === sectionNumber);
                });
                
                // Mettre à jour contenu
                document.querySelectorAll('#stratego-single-map .content-block').forEach(block => {
                    block.classList.toggle('active', parseInt(block.dataset.content) === sectionNumber);
                });
                
                // Mettre à jour tuiles et connexions
                this.updateMapForSection(sectionNumber);
            }
            
            updateMapForSection(sectionNumber) {
                this.clearAnimationTimers();
                
                // Réinitialiser toutes les tuiles
                document.querySelectorAll('#stratego-single-map .tile').forEach(tile => {
                    tile.classList.remove('active', 'pulse', 'glow');
                    tile.style.opacity = '';
                    tile.style.animation = '';
                });
                
                // Réinitialiser toutes les connexions
                document.querySelectorAll('#stratego-single-map .connection-line').forEach(line => {
                    line.classList.remove('active', 'solution-line');
                });
                
                // Animer la section correspondante
                setTimeout(() => {
                    switch(sectionNumber) {
                        case 1: this.animateSection1(); break;
                        case 2: this.animateSection2(); break;
                        case 3: this.animateSection3(); break;
                    }
                }, 300);
            }
            
            animateSection1() {
                const tiles = {
                    devis: document.querySelector('[data-tile="devis"]'),
                    materiaux: document.querySelector('[data-tile="materiaux"]'),
                    temps: document.querySelector('[data-tile="temps"]'),
                    marge: document.querySelector('[data-tile="marge"]'),
                    decisions: document.querySelector('[data-tile="decisions"]')
                };
                
                // Problèmes
                this.animationTimers.push(setTimeout(() => tiles.devis.classList.add('active'), 0));
                this.animationTimers.push(setTimeout(() => tiles.materiaux.classList.add('active'), 200));
                this.animationTimers.push(setTimeout(() => tiles.temps.classList.add('active'), 400));
                
                // Connexions vers solution
                this.animationTimers.push(setTimeout(() => {
                    this.activateConnections(['devis', 'materiaux', 'temps'], 'marge');
                }, 1200));
                
                // Solution
                this.animationTimers.push(setTimeout(() => {
                    tiles.marge.classList.add('active', 'glow');
                }, 2000));
                
                // Connexion vers bénéfice
                this.animationTimers.push(setTimeout(() => {
                    this.activateConnection('marge', 'decisions');
                }, 2800));
                
                // Bénéfice
                this.animationTimers.push(setTimeout(() => {
                    tiles.decisions.classList.add('active');
                }, 3200));
            }
            
            animateSection2() {
                const tiles = {
                    fournisseurs: document.querySelector('[data-tile="fournisseurs"]'),
                    charges: document.querySelector('[data-tile="charges"]'),
                    factures: document.querySelector('[data-tile="factures"]'),
                    previsionnel: document.querySelector('[data-tile="previsionnel"]'),
                    serenite: document.querySelector('[data-tile="serenite"]')
                };
                
                // Problèmes
                this.animationTimers.push(setTimeout(() => {
                    tiles.fournisseurs.classList.add('active');
                    tiles.charges.classList.add('active');
                }, 0));
                
                this.animationTimers.push(setTimeout(() => {
                    tiles.factures.classList.add('active');
                    tiles.factures.style.animation = 'pulse 1.5s infinite';
                }, 600));
                
                // Connexions vers solution
                this.animationTimers.push(setTimeout(() => {
                    this.activateConnections(['fournisseurs', 'charges', 'factures'], 'previsionnel');
                }, 1400));
                
                // Solution
                this.animationTimers.push(setTimeout(() => {
                    tiles.previsionnel.classList.add('active', 'glow');
                    tiles.factures.style.animation = '';
                    this.solidifyConnections(['fournisseurs', 'charges', 'factures']);
                }, 2200));
                
                // Connexion vers bénéfice
                this.animationTimers.push(setTimeout(() => {
                    this.activateConnection('previsionnel', 'serenite');
                }, 3000));
                
                // Bénéfice
                this.animationTimers.push(setTimeout(() => {
                    tiles.serenite.classList.add('active');
                }, 3400));
            }
            
            animateSection3() {
                const tiles = {
                    doute: document.querySelector('[data-tile="doute"]'),
                    investissement: document.querySelector('[data-tile="investissement"]'),
                    recrutement: document.querySelector('[data-tile="recrutement"]'),
                    conseil: document.querySelector('[data-tile="conseil"]'),
                    croissance: document.querySelector('[data-tile="croissance"]')
                };
                
                // Problème central
                this.animationTimers.push(setTimeout(() => {
                    tiles.doute.classList.add('active', 'pulse');
                }, 0));
                
                // Connexions vers choix
                this.animationTimers.push(setTimeout(() => {
                    this.activateConnection('doute', 'investissement');
                    this.activateConnection('doute', 'recrutement');
                }, 800));
                
                this.animationTimers.push(setTimeout(() => {
                    tiles.investissement.classList.add('active');
                    tiles.recrutement.classList.add('active');
                }, 1200));
                
                // Intervention
                this.animationTimers.push(setTimeout(() => {
                    this.activateInterventionLine('conseil', 'doute');
                }, 2000));
                
                // Élimination du doute + solution
                this.animationTimers.push(setTimeout(() => {
                    tiles.doute.classList.remove('active', 'pulse');
                    tiles.doute.style.opacity = '0.3';
                    tiles.conseil.classList.add('active', 'glow');
                    this.hideConnections(['doute']);
                }, 2600));
                
                // Connexion vers bénéfice
                this.animationTimers.push(setTimeout(() => {
                    this.activateConnection('conseil', 'croissance');
                }, 3400));
                
                // Bénéfice
                this.animationTimers.push(setTimeout(() => {
                    tiles.croissance.classList.add('active');
                }, 3800));
            }
            
            activateConnection(from, to) {
                const line = document.querySelector(`[data-from="${from}"][data-to="${to}"]`);
                if (line) line.classList.add('active');
            }
            
            activateConnections(fromTiles, toTile) {
                fromTiles.forEach((fromTile, index) => {
                    setTimeout(() => this.activateConnection(fromTile, toTile), index * 200);
                });
            }
            
            activateInterventionLine(from, to) {
                const line = document.querySelector(`[data-from="${from}"][data-to="${to}"]`);
                if (line) line.classList.add('intervention', 'active');
            }
            
            hideConnections(tiles) {
                tiles.forEach(tile => {
                    const connections = document.querySelectorAll(`[data-from="${tile}"], [data-to="${tile}"]`);
                    connections.forEach(connection => {
                        if (!connection.classList.contains('intervention')) {
                            connection.style.opacity = '0';
                        }
                    });
                });
            }
            
            solidifyConnections(tiles) {
                tiles.forEach(tile => {
                    const connections = document.querySelectorAll(`[data-from="${tile}"]`);
                    connections.forEach(connection => {
                        connection.classList.remove('dashed');
                        connection.classList.add('solution-line');
                    });
                });
            }
            
            setupSVGPaths() {
                const svg = document.querySelector('#stratego-single-map .connections');
                const container = svg.parentElement;
                const paths = svg.querySelectorAll('.connection-line');
                
                paths.forEach(path => {
                    const fromTile = path.dataset.from;
                    const toTile = path.dataset.to;
                    
                    const fromElement = container.querySelector(`[data-tile="${fromTile}"]`);
                    const toElement = container.querySelector(`[data-tile="${toTile}"]`);
                    
                    if (fromElement && toElement) {
                        const fromRect = fromElement.getBoundingClientRect();
                        const toRect = toElement.getBoundingClientRect();
                        const containerRect = container.getBoundingClientRect();
                        
                        const fromX = fromRect.left + fromRect.width / 2 - containerRect.left;
                        const fromY = fromRect.top + fromRect.height / 2 - containerRect.top;
                        const toX = toRect.left + toRect.width / 2 - containerRect.left;
                        const toY = toRect.top + toRect.height / 2 - containerRect.top;
                        
                        // Créer un chemin en coude (L-shape)
                        const midX = fromX + (toX - fromX) * 0.7; // Point de coude
                        const pathData = `M ${fromX} ${fromY} L ${midX} ${fromY} L ${midX} ${toY} L ${toX} ${toY}`;
                        path.setAttribute('d', pathData);
                        
                        // Calculer la longueur pour l'animation
                        const length = path.getTotalLength();
                        path.style.strokeDasharray = length;
                        path.style.strokeDashoffset = length;
                    }
                });
            }
            
            bindEvents() {
                window.addEventListener('resize', this.debounce(() => this.setupSVGPaths(), 250));
                
                // Interactions avec les tuiles
                document.addEventListener('click', (e) => {
                    if (e.target.closest('#stratego-single-map .tile')) {
                        const tile = e.target.closest('.tile');
                        tile.style.transform = 'scale(0.95)';
                        setTimeout(() => tile.style.transform = '', 150);
                    }
                });
            }
            
            clearAnimationTimers() {
                this.animationTimers.forEach(timer => clearTimeout(timer));
                this.animationTimers = [];
            }
            
            debounce(func, wait) {
                let timeout;
                return function(...args) {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func.apply(this, args), wait);
                };
            }
        }
        
        new SingleMapController();
    }
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initSingleMap);
    } else {
        initSingleMap();
    }
    
    window.addEventListener('load', initSingleMap);
})();
</script>

</div>

<!-- 
=======================================================
INSTRUCTIONS POUR PERSONNALISER VOS SVG :
=======================================================

1. REMPLACEZ LES SVG :
   Cherchez les blocs comme celui-ci :
   <div class="tile-icon">
       <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
           <!-- Votre SVG ici -->
       </svg>
   </div>

2. GARDEZ CES ATTRIBUTS :
   - width="32" height="32" 
   - fill="currentColor" (pour que la couleur change automatiquement)
   - viewBox adapté à votre SVG

3. EXEMPLE DE REMPLACEMENT :
   Pour remplacer l'icône "Devis", changez :
   
   <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
       <path d="VotrePath"/>
   </svg>

4. TUILES À PERSONNALISER :
   - devis (Devis)
   - materiaux (Matières Premières)  
   - temps (Temps de Travail)
   - fournisseurs (Fournisseurs/Achats)
   - charges (Charges/Salaires)
   - factures (Factures Clients)
   - doute (Doute/Incertitude)
   - investissement (Investissement Matériel)
   - recrutement (Recrutement)
   - marge (Marge par Chantier)
   - previsionnel (Prévisionnel de Trésorerie)
   - conseil (Conseil Stratégique)
   - decisions (Décisions Éclairées)
   - serenite (Sérénité/Anticipation)
   - croissance (Croissance Sereine)

=======================================================
-->